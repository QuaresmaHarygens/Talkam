from functools import lru_cache
from pydantic_settings import BaseSettings


class Settings(BaseSettings):
    app_name: str = "Talkam Liberia API"
    api_v1_prefix: str = "/v1"
    secret_key: str
    access_token_expire_minutes: int = 60
    refresh_token_expire_minutes: int = 60 * 24 * 7

    postgres_dsn: str
    redis_url: str
    s3_endpoint: str | None = None
    s3_access_key: str | None = None
    s3_secret_key: str | None = None
    bucket_reports: str = "talkam-media"

    rabbitmq_url: str | None = None
    sms_gateway_url: str | None = None
    sms_gateway_token: str | None = None

    admin_contact_email: str = "security@talkamliberia.org"

    class Config:
        env_file = ".env"
        env_file_encoding = "utf-8"


@lru_cache
def get_settings() -> Settings:
    return Settings()
